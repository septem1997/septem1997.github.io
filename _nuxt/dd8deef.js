(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{1168:function(t,e,n){var content=n(1182);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(83).default)("92927a12",content,!0,{sourceMap:!1})},1180:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return r}));var o=function(){return"undefined"!=typeof window?window:t},r=function(){var t=o();return t&&t.tinymce?t.tinymce:null}}).call(this,n(32))},1181:function(t,e,n){"use strict";var o=n(1168);n.n(o).a},1182:function(t,e,n){(e=n(82)(!1)).push([t.i,".articleArea[data-v-e96cc122]{display:flex;width:100%;align-items:center}",""]),t.exports=e},1187:function(t,e,n){"use strict";n.r(e);n(48);var o,r=n(18),c=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],l=function(t){return-1!==c.indexOf(t)},d=function(t,e,n){var o=e.$props.value?e.$props.value:"",r=e.$props.initialValue?e.$props.initialValue:"";n.setContent(o||r),e.$listeners.input&&function(t,e){var n=t.$props.modelEvents?t.$props.modelEvents:null,o=Array.isArray(n)?n.join(" "):n;t.$watch("value",(function(n,o){e&&"string"==typeof n&&n!==o&&n!==e.getContent({format:t.$props.outputFormat})&&e.setContent(n)})),e.on(o||"change input undo redo",(function(){t.$emit("input",e.getContent({format:t.$props.outputFormat}))}))}(e,n),function(t,e,n){Object.keys(e).filter(l).forEach((function(o){var r=e[o];"function"==typeof r&&("onInit"===o?r(t,n):n.on(o.substring(2),(function(t){return r(t,n)})))}))}(t,e.$listeners,n)},f=0,m=function(t){var time=Date.now();return t+"_"+Math.floor(1e9*Math.random())+ ++f+String(time)},h=function(t){return void 0===t||""===t?[]:Array.isArray(t)?t:t.split(" ")},v=function(){return{listeners:[],scriptId:m("tiny-script"),scriptLoaded:!1}},y=(o=v(),{load:function(t,e,n){o.scriptLoaded?n():(o.listeners.push(n),t.getElementById(o.scriptId)||function(t,e,n,o){var r=e.createElement("script");r.referrerPolicy="origin",r.type="application/javascript",r.id=t,r.src=n;var c=function(){r.removeEventListener("load",c),o()};r.addEventListener("load",c),e.head&&e.head.appendChild(r)}(o.scriptId,t,e,(function(){o.listeners.forEach((function(t){return t()})),o.scriptLoaded=!0})))},reinitialize:function(){o=v()}}),w=n(1180),$={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],value:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(t){return"html"===t||"text"===t}}},x=function(){return(x=Object.assign||function(t){for(var s,i=1,e=arguments.length;i<e;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},C=function(t){return function(){var e,n,element,o=x(x({},t.$props.init),{readonly:t.$props.disabled,selector:"#"+t.elementId,plugins:(e=t.$props.init&&t.$props.init.plugins,n=t.$props.plugins,h(e).concat(h(n))),toolbar:t.$props.toolbar||t.$props.init&&t.$props.init.toolbar,inline:t.inlineEditor,setup:function(e){t.editor=e,e.on("init",(function(n){return d(n,t,e)})),t.$props.init&&"function"==typeof t.$props.init.setup&&t.$props.init.setup(e)}});null!==(element=t.element)&&"textarea"===element.tagName.toLowerCase()&&(t.element.style.visibility=""),Object(w.a)().init(o)}},S={name:"List",components:{editor:{props:$,created:function(){this.elementId=this.$props.id||m("tiny-vue"),this.inlineEditor=this.$props.init&&this.$props.init.inline||this.$props.inline},watch:{disabled:function(){this.editor.setMode(this.disabled?"readonly":"design")}},mounted:function(){if(this.element=this.$el,null!==Object(w.a)())C(this)();else if(this.element&&this.element.ownerDocument){var t=this.$props.cloudChannel?this.$props.cloudChannel:"5",e=this.$props.apiKey?this.$props.apiKey:"no-api-key",n=null==this.$props.tinymceScriptSrc?"https://cdn.tiny.cloud/1/"+e+"/tinymce/"+t+"/tinymce.min.js":this.$props.tinymceScriptSrc;y.load(this.element.ownerDocument,n,C(this))}},beforeDestroy:function(){null!==Object(w.a)()&&Object(w.a)().remove(this.editor)},render:function(t){return this.inlineEditor?function(t,e,n){return t(n||"div",{attrs:{id:e}})}(t,this.elementId,this.$props.tagName):function(t,e){return t("textarea",{attrs:{id:e},style:{visibility:"hidden"}})}(t,this.elementId)}}},data:function(){return{pagination:{pageSize:5,current:1,total:0},data:[],form:this.$form.createForm(this),formVisible:!1,content:"",columns:[{title:"标题",dataIndex:"title"},{title:"摘要",dataIndex:"summary"},{title:"阅读量",dataIndex:"viewNum"},{title:"创建时间",dataIndex:"createTime"},{title:"操作",scopedSlots:{customRender:"operation"}}]}},mounted:function(){this.getData(this.pagination)},methods:{uploadImg:function(t,e,n){var form=new FormData;form.append("file",t.blob()),this.$axios({url:"upload",method:"post",data:form,headers:{"Content-Type":"multipart/form-data"}}).then((function(t){e(t)})).catch((function(){n()}))},addArticle:function(){this.formVisible=!0},resetForm:function(){this.form.resetFields(),this.content=""},handleDel:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.$axios.post("article/delete",{ids:[t]});case 2:e.getData(e.pagination);case 3:case"end":return n.stop()}}),n)})))()},handleOk:function(){var t=this;this.form.validateFields(function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(n,o){var r,summary;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=9;break}return(r=document.createElement("div")).innerHTML=t.content,summary=r.textContent.substr(0,64),e.next=6,t.$axios.post("article/edit",Object.assign(o,{content:t.content,summary:summary}));case 6:t.resetForm(),t.getData(t.pagination),t.formVisible=!1;case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())},getData:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.$axios({url:"article",params:{pageNum:t.current,pageSize:t.pageSize}});case 2:o=n.sent,t.total=o.total,e.pagination=t,e.data=o.list;case 6:case"end":return n.stop()}}),n)})))()},handleChange:function(t){this.getData(t),console.log(this.pagination),console.log(t)}},layout:"admin"},k=(n(1181),n(42)),component=Object(k.a)(S,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"adminTitle"},[t._v("\n    文章列表\n  ")]),t._v(" "),n("div",{staticClass:"tableWrap"},[n("div",{staticClass:"btns"},[n("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.addArticle()}}},[t._v("\n        新增文章\n      ")])],1),t._v(" "),n("a-divider"),t._v(" "),n("a-table",{attrs:{columns:t.columns,"row-key":function(t){return t.id},"data-source":t.data,pagination:t.pagination},on:{change:t.handleChange},scopedSlots:t._u([{key:"operation",fn:function(text,e){return[n("a-popconfirm",{attrs:{title:"确定删除该文章吗?"},on:{confirm:function(){return t.handleDel(e.id)}}},[n("a",{attrs:{href:"javascript:"}},[t._v("删除")])])]}}])})],1),t._v(" "),n("a-modal",{attrs:{title:"编辑文章",width:"90%","force-render":!0},on:{ok:t.handleOk,cancel:t.resetForm},model:{value:t.formVisible,callback:function(e){t.formVisible=e},expression:"formVisible"}},[n("a-form",{staticStyle:{height:"400px"},attrs:{form:t.form,"label-col":{span:3},"wrapper-col":{span:21}}},[n("a-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["id"],expression:"['id']"}]})],1),t._v(" "),n("a-form-item",{attrs:{label:"标题"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{rules:[{required:!0,message:"请输入标题"}]}],expression:"['title', { rules: [{ required: true, message: '请输入标题' }] }]"}]})],1),t._v(" "),n("div",{staticClass:"articleArea"},[n("editor",{attrs:{"api-key":"cf4gjmenzwh742lot9hyft8ygrf9mjqrmv5asdbxwhjai8wk",init:{language:"zh_CN",height:320,width:"100%",images_upload_handler:t.uploadImg,menubar:!1,file_picker_types:"image",plugins:["advlist autolink link image lists charmap print preview hr anchor pagebreak","searchreplace wordcount visualblocks visualchars code fullscreen insertdatetime media nonbreaking","table emoticons template paste help"],toolbar:"undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image | print preview media fullpage | forecolor backcolor emoticons | help"}},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1)],1)],1)],1)}),[],!1,null,"e96cc122",null);e.default=component.exports}}]);