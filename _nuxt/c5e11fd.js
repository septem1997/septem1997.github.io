(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{1198:function(e,t,r){"use strict";r.r(t);r(69),r(84),r(68),r(86),r(85),r(70),r(58),r(59),r(35),r(48);var n=r(18);function o(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,d=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return c=e.done,e},e:function(e){d=!0,o=e},f:function(){try{c||null==r.return||r.return()}finally{if(d)throw o}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}var c={name:"Menu",layout:"admin",data:function(){return{formVisible:!1,replaceFields:{children:"children",title:"title",key:"name"},checkedKeys:[],form:this.$form.createForm(this)}},computed:{treeData:function(){var e=JSON.parse(JSON.stringify(this.$store.state.menu.list));return this.appendSlots(e),e}},mounted:function(){},methods:{delMenu:function(e){var t,r=this;this.$confirm({title:"确定删除该菜单吗?",onOk:(t=Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.$axios.post("menu/delete?id="+e.id);case 2:return sessionStorage.removeItem("menu"),console.log(r.$store),t.next=6,r.$store.dispatch("menu/update");case 6:case"end":return t.stop()}}),t)}))),function(){return t.apply(this,arguments)})})},editMenu:function(e){this.form.setFieldsValue(e),this.formVisible=!0},addMenu:function(e){e?this.form.setFieldsValue(Object.assign({},{parentId:e.id})):this.form.setFieldsValue({}),this.formVisible=!0},handleOk:function(){var e=this;this.form.validateFields(function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(r,n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r){t.next=9;break}return console.log("1"),t.next=4,e.$axios.post("menu/edit",n);case 4:return sessionStorage.removeItem("menu"),t.next=7,e.$store.dispatch("menu/update");case 7:e.formVisible=!1,e.form.resetFields();case 9:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}())},appendSlots:function(e){var t,r=o(e);try{for(r.s();!(t=r.n()).done;){var n=t.value;n.scopedSlots={title:"title"},n.children&&this.appendSlots(n.children)}}catch(e){r.e(e)}finally{r.f()}}}},d=r(42),component=Object(d.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"adminTitle"},[e._v("\n    后台菜单管理\n  ")]),e._v(" "),r("div",{staticClass:"tableWrap"},[r("div",{staticClass:"btns"},[r("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.addMenu()}}},[e._v("\n        新增菜单\n      ")])],1),e._v(" "),r("a-divider"),e._v(" "),r("a-tree",{attrs:{selectable:!1,"tree-data":e.treeData,"replace-fields":e.replaceFields},scopedSlots:e._u([{key:"title",fn:function(t){return r("div",{},[e._v("\n        "+e._s(t.title)+"\n        "),r("a",{staticStyle:{"margin-left":"12px"},on:{click:function(r){return e.addMenu(t)}}},[r("a-icon",{attrs:{type:"plus-circle"}})],1),e._v(" "),r("a-divider",{attrs:{type:"vertical"}}),e._v(" "),r("a",{on:{click:function(r){return e.editMenu(t)}}},[r("a-icon",{attrs:{type:"edit"}})],1),e._v(" "),r("a-divider",{attrs:{type:"vertical"}}),e._v(" "),r("a",{on:{click:function(r){return e.delMenu(t)}}},[r("a-icon",{attrs:{type:"delete"}})],1)],1)}}]),model:{value:e.checkedKeys,callback:function(t){e.checkedKeys=t},expression:"checkedKeys"}})],1),e._v(" "),r("a-modal",{attrs:{title:"编辑菜单","force-render":!0},on:{ok:e.handleOk,cancel:function(t){return e.form.resetFields()}},model:{value:e.formVisible,callback:function(t){e.formVisible=t},expression:"formVisible"}},[r("a-form",{attrs:{form:e.form,"label-col":{span:5},"wrapper-col":{span:19}}},[r("a-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["id"],expression:"['id']"}]})],1),e._v(" "),r("a-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["parentId"],expression:"['parentId']"}]})],1),e._v(" "),r("a-form-item",{attrs:{label:"名称"}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"请输入名称"}]}],expression:"['name', { rules: [{ required: true, message: '请输入名称' }] }]"}]})],1),e._v(" "),r("a-form-item",{attrs:{label:"标题"}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{rules:[{required:!0,message:"请输入标题"}]}],expression:"['title', { rules: [{ required: true, message: '请输入标题' }] }]"}]})],1),e._v(" "),r("a-form-item",{attrs:{label:"图标"}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["icon"],expression:"['icon']"}]})],1)],1)],1)],1)}),[],!1,null,"28eaff56",null);t.default=component.exports}}]);